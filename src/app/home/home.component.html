<div class="padding" [ngClass]="{'padding':appService.hideLogo,'container':!appService.hideLogo}">
  <br>
  <h4>Featured</h4>
  <hr class="grey">
  <div class="row">
    <ng-container *ngIf="!firstNews">
      <div class="col s12 no-padding">
        <div class="tall-placeholder relative">
          <div class="loader-initial"></div>
        </div>
      </div>
    </ng-container>
    <ng-container *ngIf="firstNews">
      <div class="col s6">
        <div class="tall-image" [ngStyle]="{'background-image':'url('+firstNews[0].image+')'}">
          <app-over-image [firstNews]="firstNews[0]" (output)="openItem(firstNews[0].url)"></app-over-image>
        </div>
      </div>
      <div class="col s6">
        <div class="small-image" [ngStyle]="{'background-image':'url('+firstNews[1].image+')'}">
          <app-over-image [firstNews]="firstNews[1]" (output)="openItem(firstNews[1].url)"></app-over-image>
        </div>
        <div class="small-image" [ngStyle]="{'background-image':'url('+firstNews[2].image+')'}">
          <app-over-image [firstNews]="firstNews[2]" (output)="openItem(firstNews[2].url)"></app-over-image>
        </div>

      </div>
      <div class="col s3"><div class="small-image" [ngStyle]="{'background-image':'url('+firstNews[3].image+')'}">
        <app-over-image [firstNews]="firstNews[3]" (output)="openItem(firstNews[3].url)"></app-over-image>
      </div></div>
      <div class="col s3"><div class="small-image" [ngStyle]="{'background-image':'url('+firstNews[4].image+')'}">
        <app-over-image [firstNews]="firstNews[4]" (output)="openItem(firstNews[4].url)"></app-over-image>
      </div></div>
      <div class="col s3"><div class="small-image" [ngStyle]="{'background-image':'url('+firstNews[5].image+')'}">
        <app-over-image [firstNews]="firstNews[5]" (output)="openItem(firstNews[5].url)"></app-over-image>
      </div></div>
      <div class="col s3"><div class="small-image" [ngStyle]="{'background-image':'url('+firstNews[6].image+')'}">
        <app-over-image [firstNews]="firstNews[6]" (output)="openItem(firstNews[6].url)"></app-over-image>
      </div></div>
    </ng-container>
  </div>
  <br><br>
  <div class="right">
    <i class="material-icons layout-button" (click)="isGrid = true;saveGrid()">dashboard</i>
    <i class="material-icons layout-button" (click)="isGrid = false;saveGrid()">list</i>
  </div>
  <h4>News Feed</h4>
  <hr class="grey">
  <div *ngIf="!isGrid">
    <div class="card" *ngFor="let newsItem of news">
      <div class="card-image card-image-left waves-effect waves-block waves-light"
           *ngIf="newsItem.image" [ngStyle]="{'background-image':'url('+newsItem.image+')'}">
      </div>
      <div class="card-content">
        <i class="material-icons right">more_vert</i>
        <span class="card-title activator white-text truncate" [ngClass]="{'card-title-small':newsItem.image}">{{newsItem.title}}</span>
        <p class="grey-text description truncate" [ngClass]="{'card-title-small':newsItem.image}">{{newsItem.description}}</p>
        <div class="">
          <div class="btn-flat waves-effect waves-light white-text" (click)="openItem(newsItem.url)">link</div>
        </div>
      </div>
      <div class="card-reveal">
        <span class="card-title grey-text text-darken-4"><i class="material-icons right">close</i>{{newsItem.title}}</span>
        <p class="grey-text">{{newsItem.description}}</p>
      </div>
    </div>
  </div>

  <ngx-masonry class="masonry-layout"
               *ngIf="isGrid"
               [updateLayout]="updateMasonryLayout"
               [options]="{ transitionDuration: '0s', gutter: 20, isAnimated: false}">
    <ngxMasonryItem class="masonry-item" *ngFor="let newsItem of news">
      <div class="card">
        <div class="card-image waves-effect waves-block waves-light">
          <img class="activator" *ngIf="newsItem.image" onerror="this.style.display='none'" src="{{newsItem.image}}">
        </div>
        <div class="card-content">
          <span class="card-title activator white-text">{{newsItem.title}}<i class="material-icons right">more_vert</i></span>
          <div class="right-align">
            <div class="btn-flat waves-effect waves-light white-text" (click)="openItem(newsItem.url)">link</div>
          </div>
        </div>
        <div class="card-reveal">
          <span class="card-title grey-text text-darken-4"><i class="material-icons right">close</i>{{newsItem.title}}</span>
          <p class="grey-text">{{newsItem.description}}</p>
        </div>
      </div>
    </ngxMasonryItem>
  </ngx-masonry>
</div>
<br><br><br>
<div class="center-align">
  <div class="btn waves-effect waves-light pink-button" *ngIf="!isLoading&&!hasNoMore" (click)="getNews()">Load More</div>
  <div *ngIf="hasNoMore" class="chip">No more items...</div>
</div>
<br><br><br>
